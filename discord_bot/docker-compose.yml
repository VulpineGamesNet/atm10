services:
  discord-bot:
    build: .
    container_name: minecraft-discord-bot
    restart: unless-stopped
    stop_grace_period: 15s
    env_file:
      - .env
    # Run as pterodactyl user to access Pterodactyl volumes
    # Check UID/GID with: id pterodactyl (usually 988:988)
    user: "997:988"
    volumes:
      # Mount server stats directory from Pterodactyl Minecraft server
      # Replace <server-uuid> with your actual server UUID
      # Find it with: sudo ls /var/lib/pterodactyl/volumes/
      - /var/lib/pterodactyl/volumes/<server-uuid>/kubejs/server_data:/app/server_data:ro
    # For connecting to Minecraft RCON
    extra_hosts:
      - "host.docker.internal:host-gateway"
    # Note: Set RCON_HOST in .env to:
    # - "host.docker.internal" for containers on same host
    # - The actual IP/hostname if running on different machine
